
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>Persebaran Corona </title>
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico"/>
    <link href="assets/css/loader.css" rel="stylesheet" type="text/css" />
    <script src="assets/js/loader.js"></script>

    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700" rel="stylesheet">
    <link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/plugins.css" rel="stylesheet" type="text/css" />
    <!-- END GLOBAL MANDATORY STYLES -->

    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM STYLES -->
    <link href="assets/plugins/apex/apexcharts.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="assets/css/widgets/modules-widgets.css">
    <!-- END PAGE LEVEL PLUGINS/CUSTOM STYLES -->

</head>
<body class="alt-menu sidebar-noneoverflow">
    <!-- BEGIN LOADER -->
    <div id="load_screen"> <div class="loader"> <div class="loader-content">
        <div class="spinner-grow align-self-center"></div>
    </div></div></div>
    <!--  END LOADER -->

    <!--  BEGIN NAVBAR  -->
    <div class="header-container fixed-top">
        <header class="header navbar navbar-expand-sm expand-header">
            <a href="javascript:void(0);" class="sidebarCollapse" data-placement="bottom"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
							<line x1="3" y1="12" x2="21" y2="12"></line>
						<line x1="3" y1="6" x2="21" y2="6"></line>
						<line x1="3" y1="18" x2="21" y2="18"></line>
						</svg>
					</a>

            <ul class="navbar-item flex-row ml-auto">
                <li class="nav-item dropdown user-profile-dropdown  order-lg-0 order-1">
                    <a href="javascript:void(0);" class="nav-link dropdown-toggle user" id="userProfileDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user-check"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline></svg>
                    </a>
                    <div class="dropdown-menu position-absolute e-animated e-fadeInUp" aria-labelledby="userProfileDropdown">
                        <div class="user-profile-section">
                            <div class="media mx-auto">
                                <img src="assets/img/royhan.jpeg" class="img-fluid mr-2" alt="avatar">
                                <div class="media-body">
                                    <h5>Izzatur Royhan</h5>
                                    <p>Bukan Developers</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </li>
            </ul>
        </header>
    </div>
    <!--  END NAVBAR  -->

    <!--  BEGIN MAIN CONTAINER  -->
    <div class="main-container sidebar-closed sbar-open" id="container">

        <div class="overlay"></div>
        <div class="cs-overlay"></div>
        <div class="search-overlay"></div>

        <!--  BEGIN SIDEBAR  -->
        <div class="sidebar-wrapper sidebar-theme">

            <nav id="sidebar">

                <ul class="navbar-nav theme-brand flex-row  text-center">
                    <li class="nav-item theme-logo">
                        <a href="index.html">
                            <img src="assets/img/logo.svg" class="navbar-logo" alt="logo">
                        </a>
                    </li>
                    <li class="nav-item theme-text">
                        <a href="index.html" class="nav-link"> CORONA </a>
                    </li>
                </ul>

                <ul class="list-unstyled menu-categories" id="accordionExample">
                    <li class="menu menu-heading">
                        <a href="index.html" aria-expanded="false" class="dropdown-toggle">
                            <div class="">
															<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="feather feather-airplay">
																<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path>
																<polygon points="12 15 17 21 7 21 12 15"></polygon>
															</svg>
                                <span>Beranda</span>
                            </div>
                        </a>
                    </li>
                    <li class="menu">
                       <a href="#region" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                           <div class="">
														 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="feather feather-edit">
															 <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
															 <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
														 </svg>
                            <span>Wilayah</span>
                           </div>
                           <div>
														 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="feather feather-chevron-right">
															 <polyline points="9 18 15 12 9 6"></polyline>
														 </svg>
                           </div>
                       </a>
                       <ul class="collapse submenu list-unstyled" id="region" data-parent="">
                           <li class="">
                               <a href="region.html"> Provinsi </a>
                           </li>
                           <li>
                               <a href="kab-brebes.html"> Kab Brebes </a>
                           </li>
                       </ul>
                   </li>
									 <li class="menu active">
										 <a href="statistik.html" aria-expanded="true" class="dropdown-toggle">
													<div class="">
														 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="feather feather-activity">
															<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
														</svg>
															<span>Statistik</span>
													</div>
											</a>
									 </li>
                    <li class="menu">
                      <a href="#" aria-expanded="false" class="dropdown-toggle">
                           <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" class="feather feather-globe">
															<circle cx="12" cy="12" r="10"></circle>
															<line x1="2" y1="12" x2="22" y2="12"></line>
															<path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
														</svg>
                               <span>Negara</span>
                           </div>
                       </a>
                    </li>
                </ul>

            </nav>

        </div>
        <!--  END SIDEBAR  -->

        <!--  BEGIN CONTENT AREA  -->
        <div id="content" class="main-content">
            <div class="layout-px-spacing">

              <div class="page-header">
                   <div class="page-title">
                       <h3>Statistik Persebaran Virus Corona Indonesia</h3>
                        <h6 id="timezone"></h6>
                   </div>
               </div>
               <div class="row sales">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing">
									<div class="widget widget-chart-one">
	                            <div class="widget-heading">
	                                <h5 class=""> 7 Hari Terakhir</h5>
	                                <ul class="tabs tab-pills">
																		<img class="mb-2" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAD1BMVEXOESf+/v78/f/LABPYoKQoAvtwAAAA2klEQVR4nO3SsRGAMAzAQAfYf2Z6q035P4JOMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJe8bPOxzWGbh80npUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJqVJaVKalCalSWlSmpQmpUlpUpqUJvUDRLhqWrTgBQcAAAAASUVORK5CYII="
																		alt="" width="30" height="18">
	                                    <li class="text-white">
																			 Indonesia</li>
	                                </ul>
	                            </div>

											<div class="widget-content">
													<div class="tabs tab-content">
															<div id="content_1" class="tabcontent">
																	<div id="revenueMonthly"></div>
															</div>
													</div>
											</div>
									</div>
                </div>
								<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 layout-spacing text-center">
									<p class="terms-conditions">Â© 2020 Plugin.
											Thanks To
											<a href="https://kawalcorona.com/" target="_blank">Kawalcorona</a>,
											<a href="http://api-corona-brebes.herokuapp.com/" target="_blank">api-corona-brebes & </a>
											<a href="https://github.com/pomber/covid19/" target="_blank">
												<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
												github.com@pomber
											</a>
								</div>
             </div>
        </div>
			</div>
        <!--  END CONTENT AREA  -->
    </div>
    <!-- END MAIN CONTAINER -->

    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="assets/js/libs/jquery-3.1.1.min.js"></script>
    <script src="assets/bootstrap/js/popper.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
        $(document).ready(function() {
            App.init();
        });
    </script>
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/timezone.js"></script>
    <!-- END GLOBAL MANDATORY SCRIPTS -->

    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
    <script src="assets/plugins/apex/apexcharts.min.js"></script>

    <script src="assets/plugins/notification/snackbar/snackbar.min.js"></script>

    <script>
	async function statistic(){
		const results = [];
		const getCountries = await getData();
		const countries = await coutriesData(getCountries);
		const data = results.map(res => res.data);
		const region = results.map(res => res.name);
		const indonesia = results.map(res => res).filter(res => res.name === 'Indonesia');

		function getData(){
			return fetch('https://pomber.github.io/covid19/timeseries.json')
			.then(res => res.json())
			.then(res => res)
		}

		function getDate(res){
			const date = [];
			res.data.map(r => date.push(`${new Date(r.date).getDate()} ${m[new Date(r.date).getMonth()].substring(0, 3)} ${new Date(r.date).getFullYear()}`));
			return date.slice(Math.max(date.length - 7, 0));
			return date
		}

		function getActive(res){
			const results = []
			res.data.map(r => results.push((+r.confirmed - +r.deaths) - +r.recovered))
			return results.slice(Math.max(results.length - 7, 0));
		}

		function getConfirm(res){
			const confirm = [];
			res.data.map(r => confirm.push(r.confirmed));
			return confirm.slice(Math.max(confirm.length - 7, 0));
		}

		function getDeath(res){
			const deaths = [];
			res.data.map(r => deaths.push(r.deaths));
			return deaths.slice(Math.max(deaths.length - 7, 0));
		}

		function getRecover(res){
			const recovered = [];
			res.data.map(r => recovered.push(r.recovered));
			return recovered.slice(Math.max(recovered.length - 7, 0));
		}

		function getTotal(res){
			const total = [] ;
			res.data.map(r => total.push(r.confirmed));
			return total.slice().pop();
		}

		function coutriesData(data){
			for (let key in data) {
				if (data.hasOwnProperty(key)) {
					let country = {
						name: key,
						data: data[key]
					};
					results.push(country);
				}
			}

		}

		const options = {
					chart: {
						fontFamily: 'Nunito, sans-serif',
						height: 365,
						type: 'area',
						zoom: {
								enabled: false
						},
						dropShadow: {
							enabled: true,
							opacity: 0.3,
							blur: 5,
							left: -7,
							top: 22
						},
						toolbar: {
							show: false
						}
					},
					colors: ['#e2a03f','#2196f3','#e7515a','#20c997'],
					dataLabels: {
							enabled: false
					},
					markers: {
						discrete: [{
						seriesIndex: 0,
						dataPointIndex: 7,
						fillColor: '#000',
						strokeColor: '#000',
						size: 5
					}, {
						seriesIndex: 2,
						dataPointIndex: 11,
						fillColor: '#000',
						strokeColor: '#000',
						size: 4
					}]
					},
					subtitle: {
						text: 'Total Kasus',
						align: 'left',
						margin: 0,
						offsetX: -10,
						offsetY: 35,
						floating: false,
						style: {
							fontSize: '14px',
							color:  '#888ea8'
						}
					},
					title: {
						text: getTotal(...indonesia),
						align: 'left',
						margin: 0,
						offsetX: -10,
						offsetY: 0,
						floating: false,
						style: {
							fontSize: '25px',
							color:  '#bfc9d4'
						},
					},
					stroke: {
							show: true,
							curve: 'smooth',
							width: 2,
							lineCap: 'square'
					},
					series: [
					{
							name: 'Kasus',
							data: getConfirm(...indonesia)
					},{
								name: 'Kasus Aktif',
								data: getActive(...indonesia)
					},{
							name: 'Meninggal',
							data: getDeath(...indonesia)
					},{
							name: 'Sembuh',
							data: getRecover(...indonesia)
					}
				],
					labels: getDate(...indonesia),
					xaxis: {
						axisBorder: {
							show: false
						},
						axisTicks: {
							show: false
						},
						crosshairs: {
							show: true
						},
						labels: {
							offsetX: 0,
							offsetY: 5,
							style: {
									fontSize: '12px',
									fontFamily: 'Nunito, sans-serif',
									cssClass: 'apexcharts-xaxis-title',
							},
						}
					},
					yaxis: {
						labels: {
							formatter: function(value, index) {
								return value
							},
							offsetX: -22,
							offsetY: 0,
							style: {
									fontSize: '12px',
									fontFamily: 'Nunito, sans-serif',
									cssClass: 'apexcharts-yaxis-title',
							},
						}
					},
					grid: {
						borderColor: '#191e3a',
						strokeDashArray: 5,
						xaxis: {
								lines: {
										show: true
								}
						},
						yaxis: {
								lines: {
										show: false,
								}
						},
						padding: {
							top: 0,
							right: 0,
							bottom: 0,
							left: -10
						},
					},
					legend: {
						position: 'top',
						horizontalAlign: 'right',
						offsetY: -50,
						fontSize: '16px',
						fontFamily: 'Nunito, sans-serif',
						markers: {
							width: 10,
							height: 10,
							strokeWidth: 0,
							strokeColor: '#fff',
							fillColors: undefined,
							radius: 12,
							onClick: undefined,
							offsetX: 0,
							offsetY: 0
						},
						itemMargin: {
							horizontal: 0,
							vertical: 20
						}
					},
					tooltip: {
						theme: 'dark',
						marker: {
							show: true,
						},
						x: {
							show: false,
						}
					},
					fill: {
							type:"gradient",
							gradient: {
									type: "vertical",
									shadeIntensity: 1,
									inverseColors: !1,
									opacityFrom: .28,
									opacityTo: .05,
									stops: [45, 100]
							}
					},
					responsive: [{
						breakpoint: 575,
						options: {
							legend: {
									offsetY: -30,
							},
						},
						}]
					}

					const stat = new ApexCharts(
						document.querySelector("#revenueMonthly"),
						options
					);

					stat.render();
	}
	statistic();
    </script>

    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->

</body>
</html>
